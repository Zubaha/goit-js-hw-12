{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import Axios from 'axios';\n\nconst axios = Axios.create({\n  baseURL: 'https://pixabay.com/api/',\n  params: {\n    key: '44441755-66eac7c9e6ee4bab758e49d15',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n  },\n});\n\nexport async function searchPhoto(query, currentPage) {\n  const res = await axios.get('', {\n    params: {\n      q: query,\n      page: currentPage,\n    },\n  });\n  return res.data;\n}\n","export function addPhoto(photos) {\n  return photos\n    ?.map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n      <li class=\"photo-card\">\n      <a href='${largeImageURL}' class=\"big-photo\">\n  <img class=\"photo\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n  <ul class=\"info\">\n    <li class=\"info-item\">\n      <b>Likes</b>\n      ${likes}\n    </li>\n    <li class=\"info-item\">\n      <b>Views</b>\n${views}\n    </li>\n    <li class=\"info-item\">\n      <b>Comments</b>\n      ${comments}\n    </li>\n    <li class=\"info-item\">\n      <b>Downloads</b>\n      ${downloads}\n    </li>\n  </ul>\n  </a>\n</li>   \n`\n    )\n    .join('');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { searchPhoto } from './js/pixabay-api';\nimport { addPhoto } from './js/render-functions';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst refs = {\n  input: document.querySelector('.input-search'),\n  loader: document.querySelector('.loader'),\n  listElem: document.querySelector('.gallery'),\n  form: document.querySelector('.form'),\n  btnLoadMore: document.querySelector('.button-loadmore'),\n};\n\nlet query = '';\nlet currentPage = 1;\nlet maxPage = 1;\nconst perPage = 15;\n\nrefs.form.addEventListener('submit', async e => {\n  e.preventDefault();\n  query = refs.input.value.trim();\n\n  if (query === '') {\n    iziToast.show({\n      message: 'Please put what you want to search!',\n      position: 'topRight',\n      backgroundColor: 'red',\n      messageColor: 'white',\n      titleColor: 'white',\n    });\n    return;\n  }\n\n  currentPage = 1;\n  showLoader();\n  hideLoadBtn();\n\n  try {\n    const data = await searchPhoto(query, currentPage);\n    maxPage = Math.ceil(data.totalHits / perPage);\n\n    if (data.length === 0) {\n      iziToast.show({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n        backgroundColor: 'red',\n        messageColor: 'white',\n        titleColor: 'white',\n      });\n      hideLoader();\n      updateBtnStatus();\n      return;\n    }\n\n    const markup = addPhoto(data.hits);\n    refs.listElem.innerHTML = markup;\n  } catch (error) {\n    iziToast.show({\n      message: 'Something went wrong.',\n      position: 'topRight',\n      backgroundColor: 'red',\n      messageColor: 'white',\n      titleColor: 'white',\n    });\n\n    console.error('Error:', error);\n  }\n  hideLoader();\n  updateBtnStatus();\n  lightbox.refresh();\n});\n\nrefs.btnLoadMore.addEventListener('click', async () => {\n  currentPage++;\n  hideLoadBtn();\n  showLoader();\n\n  try {\n    const data = await searchPhoto(query, currentPage);\n    const markup = addPhoto(data.hits);\n    refs.listElem.insertAdjacentHTML('beforeend', markup);\n    skipOldElement();\n  } catch (error) {\n    iziToast.show({\n      message: 'Something went wrong while loading more images.',\n      position: 'topRight',\n      backgroundColor: 'red',\n      messageColor: 'white',\n      titleColor: 'white',\n    });\n\n    console.error('Error:', error);\n  }\n  hideLoader();\n  updateBtnStatus();\n  lightbox.refresh();\n});\n\nfunction updateBtnStatus() {\n  if (currentPage >= maxPage) {\n    hideLoadBtn();\n    iziToast.show({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n      backgroundColor: 'blue',\n      messageColor: 'white',\n      titleColor: 'white',\n    });\n  } else {\n    showLoadBtn();\n  }\n}\n\nfunction showLoadBtn() {\n  refs.btnLoadMore.classList.remove('hidden');\n}\n\nfunction hideLoadBtn() {\n  refs.btnLoadMore.classList.add('hidden');\n}\n\nfunction showLoader() {\n  refs.loader.classList.remove('hidden');\n}\nfunction hideLoader() {\n  refs.loader.classList.add('hidden');\n}\n\nfunction skipOldElement() {\n  const liElem = refs.listElem.children[0];\n  const height = liElem.getBoundingClientRect().height;\n\n  scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["axios","Axios","searchPhoto","query","currentPage","addPhoto","photos","webformatURL","largeImageURL","tags","likes","views","comments","downloads","lightbox","SimpleLightbox","refs","maxPage","perPage","e","iziToast","showLoader","hideLoadBtn","data","hideLoader","updateBtnStatus","markup","error","skipOldElement","showLoadBtn","height"],"mappings":"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"}